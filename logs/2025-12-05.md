# Log 2025-12-05

## From yesterday
2025-12-05 00:59:02 Equalization finish. Reason Narrow range. Next try 1290 to max.

## Scans
- 12:11 Noise scan THL 1290 to 1575, shutter 0.01. 
Frequent decode errors : [FifoReadout    ] - WARNING There were 0 discard errors and 255 decode errors - Resetting error counters. Probably the FPGA overflow due to noise at low thresholds. 
Wrong equalization file.
- 12:17 Equalization reverted to - Equalization W15-G6_equal-Bonn.h5 (from Markus?)
- 12:18 Noise scan THL 1290 to 1575, shutter 0.01. [FifoReadout    ] - WARNING There were 0 discard errors and 1275 decode errors - Resetting error counters
- 12:20 During noise scan 3.3V/0.219A, 1.523V/0.078A, 1.521V/0.209A
- 12:26 tpx3_gui crash   File "/home/ixpe_user/tpx3-daq/tpx3/analysis.py", line 298, in save_and_correct
    ones = np.where(package0 == 1)[0]
           ~~~~~~~~^^^^^^^^^^^^^^^
RecursionError: maximum recursion depth exceeded
- 12:43 Logout/Login Ubuntu to restore tpx3_gui
- 12:44 Noise Scan THL 1290-1575, shutter 0.01. [FifoReadout    ] - WARNING There were 0 discard errors and 1785 decode errors - Resetting error counters 
- 14:27 NoiseScan_2025-12-05_12-44-36.h5 70 MB - Analysis failed : RecursionError: maximum recursion depth exceeded. Try to analyze data manually : Interpretation fails, probably FPGA overflows and throws away all data packets?
- 14:35 THL Scan for Ne=200e, VtpC 100 VtpF 221 [(221-2*100)*0.5e-3*3e-15/1.602e-19] assuming 0.5 V VtpF DAC. VtpF changed 300-->221. THL Scan 1290-1450, 100 tp, 1/256 column mask [Intermediate run during Noise scan analysis]. Expected THL from AlHe VtpF is 1367.49 THL. Result is broad THL distribution centered at 1350, ie 1348 \pm 58. Noise 6.9\pm0.8 hits. Reference ../plots/ThresholdScan_2025-12-05_14-38-03.pdf [#! THL/Noise pixel distributions show grid like pattern]
- 15:16 To verify AlHe THL Scan for large Ne=1000e (Avalache expected). VtpC = 100, VtpF = 307. Expected 1678.12 THL (Scan 1550-1800). Result = 1686 \pm 53 THL. Expected THL. Noise 6.9\pm0.8 hits. Noise pixel distribution is random. Reference ../plots/ThresholdScan_2025-12-05_15-20-30.pdf

## Avalanche statistics from Polya
For Electric field at grid: 79060.43210908 V/cm for electron_transport_ar_80_dme_20_bis, alpha = 1466.65877652 per cm
Theta = 0.9 as shape parameter
Probability of Townsend avalanche below threshold (200 e-): 0.0297
Probability of Townsend avalanche above threshold (200 e-): 0.9703
Probability of Townsend avalanche below threshold (250 e-): 0.0541
Probability of Townsend avalanche above threshold (250 e-): 0.9459
Probability of Townsend avalanche below threshold (300 e-): 0.0829
Probability of Townsend avalanche above threshold (300 e-): 0.9171
Probability of Townsend avalanche below threshold (400 e-): 0.1148
Probability of Townsend avalanche above threshold (400 e-): 0.8852
Probability of Townsend avalanche below threshold (500 e-): 0.1490
Probability of Townsend avalanche above threshold (500 e-): 0.8510

## Scans contd..
- From previous two noise scans, it is safe to trust AlHe VtpF DAC setting. From 14:35 THLScan, 200 e is around 1367.49 THL and from 15:16 THLScan, 1000 e is around 1678.12. Estimate lowest possible THL for a noise scan without FPGA overflow.
- 15:58 VtpF DAC set back to 300 (to makes ure no chages wrt last noise scan). NoiseScan THL 1368 to 1575, shutter 0.01 s. No FPGA overflow, all 65k pixels per THL active and 65k hits per THL. Reference ../plots/NoiseScan_2025-12-05_16-00-09.pdf. FPGA does not over flow. All pixels have noise, about one hit per pixel.
- 17:07 Test TOT calibration for > 200 e. For TOT calibration from 200 to 4000 electrons, VtpF DAC range is 221.36 to 627.20 for VtpC DAC 100. Mask 4. Expected threshold from HeAl fit is 1367.49 to 2842.96 THL. THL DAC is 1343, below this. Results are noisy but good. Reference ../plots/ToTCalib_2025-12-05_17-11-20.pdf





